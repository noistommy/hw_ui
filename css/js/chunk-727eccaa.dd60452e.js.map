{"version":3,"sources":["webpack:///./src/components/Games/2048/2048.vue","webpack:///src/components/Games/2048/2048.vue","webpack:///./src/components/Games/2048/2048.vue?bad2","webpack:///./src/components/Games/2048/2048.vue?2e86","webpack:///./src/components/Games/2048/2048.vue?4e57"],"names":["render","_vm","this","_c","_self","staticClass","ref","style","cellStyle","attrs","on","addTile","$event","preventDefault","controller","apply","arguments","_l","cells","cell","key","id","tiles","tile","x","y","Math","log2","value","_v","_s","staticRenderFns","name","data","start","gridSize","cellSize","computed","cellGap","emptyCells","created","mounted","methods","setTileValue","createCell","cellList","selectCell","console","getRandomCell","newTile","changeTile","matrix","cellByColumn","cellGrid","cellByRow","slideTile","lastCell","group","findTileIndex","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,MAAM,CAACG,IAAI,SAASC,MAAON,EAAIO,UAAWC,MAAM,CAAC,GAAK,aAAa,SAAW,KAAKC,GAAG,CAAC,MAAQT,EAAIU,QAAQ,QAAU,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBZ,EAAIa,WAAWC,MAAM,KAAMC,cAAc,CAACf,EAAIgB,GAAIhB,EAAIiB,OAAO,SAASC,GAAM,OAAOhB,EAAG,MAAM,CAACiB,IAAK,QAAOD,EAAKE,GAAKhB,YAAY,OAAOI,MAAM,CAAC,GAAK,CAAE,QAAOU,EAAKE,UAAWpB,EAAIgB,GAAIhB,EAAIqB,OAAO,SAASC,GAAM,OAAOpB,EAAG,MAAM,CAACiB,IAAK,QAAOG,EAAKF,GAAKhB,YAAY,OAAOE,MAAO,CAAC,MAAOgB,EAAKC,EAAG,MAAOD,EAAKE,EAAG,iBAAqB,IAAoC,GAA7BC,KAAKC,KAAKJ,EAAKA,KAAKK,OAA7B,KAA+CnB,MAAM,CAAC,GAAK,CAAE,QAAOc,EAAKF,MAAQ,CAACpB,EAAI4B,GAAG,IAAI5B,EAAI6B,GAAGP,EAAKA,KAAKK,OAAO,WAAU,MAEhtBG,EAAkB,GCcP,GACfC,aACAC,OACA,OACAC,SACAhB,SACAI,SACAa,WACAC,cAGAC,UACAC,UACA,yBAEA9B,YACA,OACA,4BACA,mCACA,mCAGA+B,aACA,4CAGAC,UACA,8BAGAC,UACA,2BAEAC,SACAC,eACA,6BAEAC,aACA,oDAUA,OATAC,kBACA,SACArB,kBACAC,8BACAJ,KACAE,WAEAsB,SAEA,GAEAC,cACAC,gBAEAC,gBACA,yDACA,2BAEArC,UACA,6BACAsC,QAAArB,2BACA,mBACA,oBAEAsB,eAGApC,cACA,cACA,SACA,UACA,QACA,qBACA,cACA,eACA,eACA,MACA,aACA,6BACA,cACA,cACA,MACA,cACAqC,sBACA,kBACA,MACA,gBACAA,mBAEA,kBACA,MACA,iBACAA,4CACA,kBACA,MACA,gBACAA,+CACA,kBACA,QAGAC,eACA,iCACAC,kBACAA,cACA,GACA,KAEAC,YACA,iCACAD,kBACAA,cACA,GACA,KAEAE,aACAJ,cACA,4BACA,6BACA,WACA,wBACA,4DACAK,IACAT,0BAEA,aACA,oCACA,8BACA,iBACAU,oBACA,qBAKAA,iCACA,mBACA,wBAEAA,mBAIA,gBAEAC,iBACA,4CCjK4W,I,wBCQxWC,EAAY,eACd,EACA3D,EACA+B,GACA,EACA,KACA,WACA,MAIa,aAAA4B,E,kECnBf","file":"js/chunk-727eccaa.dd60452e.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"game-board-body\"},[_c('div',{ref:\"gBoard\",style:(_vm.cellStyle),attrs:{\"id\":\"game-board\",\"tabindex\":\"1\"},on:{\"click\":_vm.addTile,\"keydown\":function($event){$event.preventDefault();return _vm.controller.apply(null, arguments)}}},[_vm._l((_vm.cells),function(cell){return _c('div',{key:`cell_${cell.id}`,staticClass:\"cell\",attrs:{\"id\":[`cell_${cell.id}`]}})}),_vm._l((_vm.tiles),function(tile){return _c('div',{key:`tile_${tile.id}`,staticClass:\"tile\",style:({'--x': tile.x, '--y': tile.y, '--bg-lightness': `${100 - (Math.log2(tile.tile.value) * 20)}%`}),attrs:{\"id\":[`tile_${tile.id}`]}},[_vm._v(\" \"+_vm._s(tile.tile.value)+\" \")])})],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"game-board-body\">\n    <div id=\"game-board\" :style=\"cellStyle\" tabindex=\"1\" ref=\"gBoard\"\n         @click=\"addTile\" @keydown.prevent=\"controller\">\n      <div class=\"cell\" v-for=\"(cell) in cells\" :key=\"`cell_${cell.id}`\" :id=\"[`cell_${cell.id}`]\"></div>\n      <div class=\"tile\" v-for=\"(tile) in tiles\" :key=\"`tile_${tile.id}`\" :id=\"[`tile_${tile.id}`]\"\n           :style=\"{'--x': tile.x, '--y': tile.y, '--bg-lightness': `${100 - (Math.log2(tile.tile.value) * 20)}%`}\">\n        {{tile.tile.value}}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// import Tile from './Tile'\n\nexport default {\n  name: 'G2048',\n  data() {\n    return {\n      start: false,\n      cells: [],\n      tiles :[],\n      gridSize: 4,\n      cellSize: 10,\n    }\n  },\n  computed: {\n    cellGap() {\n      return this.cellSize/10\n    },\n    cellStyle() {\n      return {\n          '--grid-size': this.gridSize,\n          '--cell-size': `${this.cellSize}vmin`,\n          '--cell-gap': `${this.cellGap}vmin`,\n      }\n    },\n    emptyCells() {\n      return this.cells.filter(item => item.tile == null);\n    }\n  },\n  created() {\n    this.cells = this.createCell();\n    // console.log(new Tile)\n  },\n  mounted() {\n    this.$refs.gBoard.focus();\n  },\n  methods: {\n    setTileValue() {\n      return Math.random() > 0.2 ? 2 : 4;\n    },\n    createCell() {\n      let cellList = new Array(this.gridSize * this.gridSize).fill()\n      cellList.forEach((item, index) => {\n        const cell = {\n          x: index % this.gridSize,\n          y: Math.floor(index / this.gridSize),\n          id: index,\n          tile: null\n        }\n        cellList[index] = cell\n      })\n      return cellList\n    },\n    selectCell(value) {\n      console.log(value)\n    },\n    getRandomCell() {\n      const randomIndex = Math.floor(Math.random() * this.emptyCells.length)\n      return this.emptyCells[randomIndex]\n    },\n    addTile() {\n      const newTile = this.getRandomCell();\n      newTile.tile = {value: this.setTileValue()}\n      this.tiles.push(newTile)\n      this.cells[newTile.id] = newTile\n    },\n    changeTile() {\n\n    },\n    controller(e) {\n      const key = e.key;\n      let matrix = [];\n      switch (key) {\n        case ' ':\n          if(this.start) return;\n          this.start = true;\n          this.addTile()\n          this.addTile()\n          break;\n        case 'Escape':\n          this.cells = this.createCell()\n          this.tiles = []\n          this.start = false\n          break;\n        case 'ArrowUp':\n          matrix = this.cellByColumn()\n          this.slideTile(matrix)\n          break;\n        case 'ArrowLeft':\n          matrix = this.cellByRow()\n\n          this.slideTile(matrix)\n          break;\n        case 'ArrowRight':\n          matrix = this.cellByRow().map(row => [...row].reverse())\n          this.slideTile(matrix)\n          break;\n        case 'ArrowDown':\n          matrix = this.cellByColumn().map(column => [...column].reverse())\n          this.slideTile(matrix)\n          break;\n      }\n    },\n    cellByColumn() {\n      return this.cells.reduce((cellGrid, cell) => {\n        cellGrid[cell.x] = cellGrid[cell.x] || []\n        cellGrid[cell.x][cell.y] = cell\n        return cellGrid\n      }, [])\n    },\n    cellByRow() {\n      return this.cells.reduce((cellGrid, cell) => {\n        cellGrid[cell.y] = cellGrid[cell.y] || []\n        cellGrid[cell.y][cell.x] = cell\n        return cellGrid\n      }, [])\n    },\n    slideTile(matrix) {\n      matrix.forEach(group => {\n        for(let i = 1; i < group.length; i++) {\n          if(group[i].tile === null) continue;\n          let lastCell = null;\n          for(let j = i - 1; j >= 0 ;j--) {\n            if(!(group[j].tile == null || group[j].tile.value === group[i].tile.value)) break;\n            lastCell = j;\n            console.log(\"laseCell\", j)\n          }\n          if(lastCell !== null) {\n            const target_i = this.findTileIndex(group[i].id)\n            const target_j = this.findTileIndex(group[lastCell].id)\n            if(group[lastCell].tile == null) {\n              group[lastCell].tile = group[i].tile;\n              this.tiles[target_i] = group[lastCell]\n              // this.tiles[target_i].id = group[lastCell].id\n              // this.tiles[target_i].x = group[lastCell].x\n              // this.tiles[target_i].y = group[lastCell].y\n            } else {\n              group[lastCell].tile.value += group[i].tile.value;\n              this.tiles[target_i] = group[lastCell]\n              this.tiles.splice(target_j, 1)\n            }\n            group[i].tile = null\n          }\n        }\n      })\n      this.addTile()\n    },\n    findTileIndex(id) {\n      return this.tiles.findIndex(item => item.id === id)\n    },\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.game-board-body {\n  background-color: #333;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 4vmin;\n  height: 100%;\n}\n#game-board {\n  outline: none;\n  display: grid;\n  grid-template-columns: repeat(var(--grid-size), var(--cell-size));\n  grid-template-rows: repeat(var(--grid-size), var(--cell-size));\n  //background-color: #ccc;\n  background-color: transparent;\n  gap: var(--cell-gap);\n  padding: var(--cell-gap);\n  border-radius: .5vmin;\n  position: relative;\n  .cell {\n    background-color: #aaa;\n    border-radius: .5vmin;\n    color: transparent;\n    &:hover {\n      color: #333;\n    }\n  }\n  .tile {\n    --bg-lightness: 80%;\n    --t-lightness: 20%;\n    border: 2px solid transparent;\n    position: absolute;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: var(--cell-size);\n    height: var(--cell-size);\n    border-radius: .5vmin;\n    //background-color: #fff;\n    top: calc(var(--y) * (var(--cell-size) + var(--cell-gap)) + var(--cell-gap));\n    left: calc(var(--x) * (var(--cell-size) + var(--cell-gap)) + var(--cell-gap));\n    font-weight: 900;\n    //background-color: hsl(200, 50%, var(--bg-lightness));\n    background: radial-gradient(circle at center, #fff, hsl(200, 50%, var(--bg-lightness)) 80%);\n    box-shadow: 0 0 20px hsl(200, 50%, var(--bg-lightness));\n    color: hsl(200, 25%, var(--t-lightness));\n    //animation: scale-easeOutElastic 1s ease-in-out;\n    animation: show 1000ms ease-in-out;\n    transition: 400ms ease-in-out;\n  }\n}\n@keyframes show {\n  0% {\n    opacity: 0%;\n  }\n}\n@keyframes scale-easeOutElastic {\n  0% {\n    transform: scale(0);\n  }\n\n  16% {\n    transform: scale(1.12);\n  }\n\n  28% {\n    transform: scale(0.83);\n  }\n\n  44% {\n    transform: scale(1.05);\n  }\n\n  59% {\n    transform: scale(0.95);\n  }\n\n  73% {\n    transform: scale(1.01);\n  }\n\n  88% {\n    transform: scale(1);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n\n}\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./2048.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./2048.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./2048.vue?vue&type=template&id=28c7dded&scoped=true&\"\nimport script from \"./2048.vue?vue&type=script&lang=js&\"\nexport * from \"./2048.vue?vue&type=script&lang=js&\"\nimport style0 from \"./2048.vue?vue&type=style&index=0&id=28c7dded&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28c7dded\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./2048.vue?vue&type=style&index=0&id=28c7dded&prod&lang=scss&scoped=true&\""],"sourceRoot":""}