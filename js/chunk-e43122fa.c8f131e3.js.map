{"version":3,"sources":["webpack:///./src/components/Games/2048/2048.vue?f974","webpack:///src/components/Games/2048/2048.vue","webpack:///./src/components/Games/2048/2048.vue?bad2","webpack:///./src/components/Games/2048/2048.vue","webpack:///./src/components/Games/2048/2048.vue?3919"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","style","attrs","on","addTile","$event","preventDefault","controller","apply","arguments","_l","cell","key","tile","x","y","Math","log2","value","_v","_s","staticRenderFns","name","data","start","cells","tiles","gridSize","cellSize","computed","cellGap","cellStyle","emptyCells","filter","created","createCell","mounted","$refs","gBoard","focus","methods","setTileValue","random","cellList","id","selectCell","console","getRandomCell","randomIndex","newTile","push","changeTile","e","matrix","slideTile","cellByColumn","reduce","cellGrid","cellByRow","lastCell","group","findTileIndex","findIndex","component"],"mappings":"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","file":"js/chunk-e43122fa.c8f131e3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"game-board-body\"},[_c('div',{ref:\"gBoard\",style:(_vm.cellStyle),attrs:{\"id\":\"game-board\",\"tabindex\":\"1\"},on:{\"click\":_vm.addTile,\"keydown\":function($event){$event.preventDefault();return _vm.controller.apply(null, arguments)}}},[_vm._l((_vm.cells),function(cell){return _c('div',{key:(\"cell_\" + (cell.id)),staticClass:\"cell\",attrs:{\"id\":[(\"cell_\" + (cell.id))]}})}),_vm._l((_vm.tiles),function(tile){return _c('div',{key:(\"tile_\" + (tile.id)),staticClass:\"tile\",style:({'--x': tile.x, '--y': tile.y, '--bg-lightness': ((100 - (Math.log2(tile.tile.value) * 20)) + \"%\")}),attrs:{\"id\":[(\"tile_\" + (tile.id))]}},[_vm._v(\" \"+_vm._s(tile.tile.value)+\" \")])})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"game-board-body\">\n    <div id=\"game-board\" :style=\"cellStyle\" tabindex=\"1\" ref=\"gBoard\"\n         @click=\"addTile\" @keydown.prevent=\"controller\">\n      <div class=\"cell\" v-for=\"(cell) in cells\" :key=\"`cell_${cell.id}`\" :id=\"[`cell_${cell.id}`]\"></div>\n      <div class=\"tile\" v-for=\"(tile) in tiles\" :key=\"`tile_${tile.id}`\" :id=\"[`tile_${tile.id}`]\"\n           :style=\"{'--x': tile.x, '--y': tile.y, '--bg-lightness': `${100 - (Math.log2(tile.tile.value) * 20)}%`}\">\n        {{tile.tile.value}}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// import Tile from './Tile'\n\nexport default {\n  name: 'G2048',\n  data() {\n    return {\n      start: false,\n      cells: [],\n      tiles :[],\n      gridSize: 4,\n      cellSize: 10,\n    }\n  },\n  computed: {\n    cellGap() {\n      return this.cellSize/10\n    },\n    cellStyle() {\n      return {\n          '--grid-size': this.gridSize,\n          '--cell-size': `${this.cellSize}vmin`,\n          '--cell-gap': `${this.cellGap}vmin`,\n      }\n    },\n    emptyCells() {\n      return this.cells.filter(item => item.tile == null);\n    }\n  },\n  created() {\n    this.cells = this.createCell();\n    // console.log(new Tile)\n  },\n  mounted() {\n    this.$refs.gBoard.focus();\n  },\n  methods: {\n    setTileValue() {\n      return Math.random() > 0.2 ? 2 : 4;\n    },\n    createCell() {\n      let cellList = new Array(this.gridSize * this.gridSize).fill()\n      cellList.forEach((item, index) => {\n        const cell = {\n          x: index % this.gridSize,\n          y: Math.floor(index / this.gridSize),\n          id: index,\n          tile: null\n        }\n        cellList[index] = cell\n      })\n      return cellList\n    },\n    selectCell(value) {\n      console.log(value)\n    },\n    getRandomCell() {\n      const randomIndex = Math.floor(Math.random() * this.emptyCells.length)\n      return this.emptyCells[randomIndex]\n    },\n    addTile() {\n      const newTile = this.getRandomCell();\n      newTile.tile = {value: this.setTileValue()}\n      this.tiles.push(newTile)\n      this.cells[newTile.id] = newTile\n    },\n    changeTile() {\n\n    },\n    controller(e) {\n      const key = e.key;\n      let matrix = [];\n      switch (key) {\n        case ' ':\n          if(this.start) return;\n          this.start = true;\n          this.addTile()\n          this.addTile()\n          break;\n        case 'Escape':\n          this.cells = this.createCell()\n          this.tiles = []\n          this.start = false\n          break;\n        case 'ArrowUp':\n          matrix = this.cellByColumn()\n          this.slideTile(matrix)\n          break;\n        case 'ArrowLeft':\n          matrix = this.cellByRow()\n\n          this.slideTile(matrix)\n          break;\n        case 'ArrowRight':\n          matrix = this.cellByRow().map(row => [...row].reverse())\n          this.slideTile(matrix)\n          break;\n        case 'ArrowDown':\n          matrix = this.cellByColumn().map(column => [...column].reverse())\n          this.slideTile(matrix)\n          break;\n      }\n    },\n    cellByColumn() {\n      return this.cells.reduce((cellGrid, cell) => {\n        cellGrid[cell.x] = cellGrid[cell.x] || []\n        cellGrid[cell.x][cell.y] = cell\n        return cellGrid\n      }, [])\n    },\n    cellByRow() {\n      return this.cells.reduce((cellGrid, cell) => {\n        cellGrid[cell.y] = cellGrid[cell.y] || []\n        cellGrid[cell.y][cell.x] = cell\n        return cellGrid\n      }, [])\n    },\n    slideTile(matrix) {\n      matrix.forEach(group => {\n        for(let i = 1; i < group.length; i++) {\n          if(group[i].tile === null) continue;\n          let lastCell = null;\n          for(let j = i - 1; j >= 0 ;j--) {\n            if(!(group[j].tile == null || group[j].tile.value === group[i].tile.value)) break;\n            lastCell = j;\n            console.log(\"laseCell\", j)\n          }\n          if(lastCell !== null) {\n            const target_i = this.findTileIndex(group[i].id)\n            const target_j = this.findTileIndex(group[lastCell].id)\n            if(group[lastCell].tile == null) {\n              group[lastCell].tile = group[i].tile;\n              this.tiles[target_i] = group[lastCell]\n              // this.tiles[target_i].id = group[lastCell].id\n              // this.tiles[target_i].x = group[lastCell].x\n              // this.tiles[target_i].y = group[lastCell].y\n            } else {\n              group[lastCell].tile.value += group[i].tile.value;\n              this.tiles[target_i] = group[lastCell]\n              this.tiles.splice(target_j, 1)\n            }\n            group[i].tile = null\n          }\n        }\n      })\n      this.addTile()\n    },\n    findTileIndex(id) {\n      return this.tiles.findIndex(item => item.id === id)\n    },\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.game-board-body {\n  background-color: #333;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 4vmin;\n  height: 100%;\n}\n#game-board {\n  outline: none;\n  display: grid;\n  grid-template-columns: repeat(var(--grid-size), var(--cell-size));\n  grid-template-rows: repeat(var(--grid-size), var(--cell-size));\n  //background-color: #ccc;\n  background-color: transparent;\n  gap: var(--cell-gap);\n  padding: var(--cell-gap);\n  border-radius: .5vmin;\n  position: relative;\n  .cell {\n    background-color: #aaa;\n    border-radius: .5vmin;\n    color: transparent;\n    &:hover {\n      color: #333;\n    }\n  }\n  .tile {\n    --bg-lightness: 80%;\n    --t-lightness: 20%;\n    border: 2px solid transparent;\n    position: absolute;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: var(--cell-size);\n    height: var(--cell-size);\n    border-radius: .5vmin;\n    //background-color: #fff;\n    top: calc(var(--y) * (var(--cell-size) + var(--cell-gap)) + var(--cell-gap));\n    left: calc(var(--x) * (var(--cell-size) + var(--cell-gap)) + var(--cell-gap));\n    font-weight: 900;\n    //background-color: hsl(200, 50%, var(--bg-lightness));\n    background: radial-gradient(circle at center, #fff, hsl(200, 50%, var(--bg-lightness)) 80%);\n    box-shadow: 0 0 20px hsl(200, 50%, var(--bg-lightness));\n    color: hsl(200, 25%, var(--t-lightness));\n    //animation: scale-easeOutElastic 1s ease-in-out;\n    animation: show 1000ms ease-in-out;\n    transition: 400ms ease-in-out;\n  }\n}\n@keyframes show {\n  0% {\n    opacity: 0%;\n  }\n}\n@keyframes scale-easeOutElastic {\n  0% {\n    transform: scale(0);\n  }\n\n  16% {\n    transform: scale(1.12);\n  }\n\n  28% {\n    transform: scale(0.83);\n  }\n\n  44% {\n    transform: scale(1.05);\n  }\n\n  59% {\n    transform: scale(0.95);\n  }\n\n  73% {\n    transform: scale(1.01);\n  }\n\n  88% {\n    transform: scale(1);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n\n}\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./2048.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./2048.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./2048.vue?vue&type=template&id=28c7dded&scoped=true&\"\nimport script from \"./2048.vue?vue&type=script&lang=js&\"\nexport * from \"./2048.vue?vue&type=script&lang=js&\"\nimport style0 from \"./2048.vue?vue&type=style&index=0&id=28c7dded&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28c7dded\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./2048.vue?vue&type=style&index=0&id=28c7dded&lang=scss&scoped=true&\""],"sourceRoot":""}